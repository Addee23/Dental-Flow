@model IEnumerable<DentalFlow.Models.Booking>
@{
    Layout = "/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<style>

    /* ============================================================
            DESKTOP > 1100px
       ============================================================ */
    @@media (min-width: 1101px) {
        .desktop-table {
            display: block !important;
        }

        .mobile-cards {
            display: none !important;
        }
    }

    /* ============================================================
            TABLET 768–1100px
       ============================================================ */
    @@media (min-width: 768px) and (max-width: 1100px) {

        .desktop-table {
            display: none !important;
        }

        .mobile-cards {
            display: block !important;
        }

        .filter-row {
            flex-direction: column !important;
            width: 100%;
            align-items: stretch !important;
            gap: 8px;
        }

            .filter-row input,
            .filter-row select,
            .filter-row button,
            .filter-row a {
                width: 100% !important;
            }

        .btn {
            padding: 6px 10px !important;
            font-size: 0.9rem !important;
        }

        h1 {
            font-size: 1.6rem;
        }
    }

    /* ============================================================
            MOBIL < 768px
              ============================================================ */
    @@media (max-width: 767px) {

        .desktop-table {
            display: none !important;
        }

        .mobile-cards {
            display: block !important;
        }

        .filter-row {
            flex-direction: column !important;
            width: 100%;
        }

            .filter-row input,
            .filter-row select,
            .filter-row button,
            .filter-row a {
                width: 100% !important;
            }

        .btn {
            width: 100%;
        }
    }

    /* ============================================================
            BASE BUTTON SETTINGS + ANIMATIONER
       ============================================================ */

    .btn {
        white-space: nowrap;
        transition: background-color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease;
        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }

        .btn:hover {
            box-shadow: 0 3px 6px rgba(0,0,0,0.12);
            transform: translateY(-1px);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0,0,0,0.08);
        }

    /* Ikon + text i knappar */
    .btn-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
    }

        .btn-icon i {
            font-size: 0.9em;
        }

    /* ============================================================
            Desktop — symmetriska knappar i tabell
       ============================================================ */
    .desktop-table .action-row {
        display: flex;
        gap: 6px;
    }

        .desktop-table .action-row .btn {
            flex: 1;
        }

    /* ============================================================
            Mobile card styles
       ============================================================ */
    .booking-card {
        background: #fff;
        padding: 18px;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        margin-bottom: 18px;
    }

        .booking-card p {
            margin: 4px 0;
        }

        .booking-card strong {
            display: inline-block;
            width: 130px;
        }

    /* ============================================================
            Mobile/Tablet – buttons in row (Alternativ 1)
              ============================================================ */
    .mobile-cards .btn-row {
        display: flex;
        gap: 10px;
        justify-content: space-between;
    }

        .mobile-cards .btn-row .btn {
            flex: 1;
        }

    /* ============================================================
            FILTER ROW DEFAULT
       ============================================================ */
    .filter-row {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
    }

    /* ============================================================
            Harmoniska färger — Action-knappar
       ============================================================ */

    /* Redigera */
    .btn-edit {
        background-color: #F4A259 !important;
        color: white !important;
        border: none !important;
    }

        .btn-edit:hover {
            background-color: #e38f47 !important;
        }

    /* Detaljer */
    .btn-details {
        background-color: #7BA4BE !important;
        color: white !important;
        border: none !important;
    }

        .btn-details:hover {
            background-color: #6a90a8 !important;
        }

    /* Ta bort */
    .btn-delete {
        background-color: #D26464 !important;
        color: white !important;
        border: none !important;
    }

        .btn-delete:hover {
            background-color: #b85656 !important;
        }

    /* ============================================================
            Harmoniska färger — Filter + Ny bokning
       ============================================================ */

    /* Primär (Skapa ny bokning, Filtrera) */
    .btn-primary-soft {
        background-color: #7BA4BE !important;
        color: white !important;
        border: none !important;
    }

        .btn-primary-soft:hover {
            background-color: #6a90a8 !important;
        }

    /* Sekundär (Återställ) */
    .btn-secondary-soft {
        background-color: #AAB8C2 !important;
        color: white !important;
        border: none !important;
    }

        .btn-secondary-soft:hover {
            background-color: #92A0AA !important;
        }

</style>




<h1 class="mb-3">Bokningar</h1>

<!-- FILTER -->
<form method="get" asp-action="Index" class="mb-3">
    <div class="filter-row">

        <input type="date"
               name="date"
               class="form-control"
               value="@ViewBag.SelectedDate" />

        <select name="month" class="form-control" style="max-width: 200px;">
            <option value="">Alla månader</option>

            @for (int m = 1; m <= 12; m++)
            {
                bool selected = ViewBag.SelectedMonth == m;
                <option value="@m" selected="@(selected ? "selected" : null)">
                    @System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(m)
                </option>
            }
        </select>

        <button type="submit" class="btn btn-primary-soft btn-icon">
            <i class="fa-solid fa-filter"></i>
            <span>Filtrera</span>
        </button>
        <a href="@Url.Action("Index")" class="btn btn-secondary-soft btn-icon">
            <i class="fa-solid fa-rotate-left"></i>
            <span>Återställ</span>
        </a>

    </div>
</form>

<a asp-action="Create" class="btn btn-primary-soft btn-icon mb-3">
    <i class="fa-solid fa-plus"></i>
    <span>Skapa ny bokning</span>
</a>



<!-- DESKTOP TABLE -->
<div class="table-responsive desktop-table">
    <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark">
            <tr>
                <th>Namn</th>
                <th>E-post</th>
                <th>Telefon</th>
                <th>Datum & tid</th>
                <th>Behandling</th>
                <th style="width:200px;"></th>
            </tr>
        </thead>

        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Name</td>
                    <td>@item.Email</td>
                    <td>@item.Phone</td>
                    <td>@item.DateTime.ToString("yyyy-MM-dd HH:mm")</td>
                    <td>@item.Service?.Name</td>

                    <!-- DESKTOP – harmoniska knappar med ikoner -->
                    <td>
                        <div class="action-row">
                            <a class="btn btn-sm btn-edit btn-icon" asp-action="Edit" asp-route-id="@item.Id">
                                <i class="fa-solid fa-pen"></i>
                                <span>Redigera</span>
                            </a>
                            <a class="btn btn-sm btn-details btn-icon" asp-action="Details" asp-route-id="@item.Id">
                                <i class="fa-solid fa-circle-info"></i>
                                <span>Detaljer</span>
                            </a>
                            <a class="btn btn-sm btn-delete btn-icon" asp-action="Delete" asp-route-id="@item.Id">
                                <i class="fa-solid fa-trash"></i>
                                <span>Ta bort</span>
                            </a>
                        </div>
                    </td>

                </tr>
            }
        </tbody>
    </table>
</div>




<!-- MOBILE + TABLET CARDS -->
<div class="mobile-cards">
    @foreach (var item in Model)
    {
        <div class="booking-card">
            <p><strong>Namn:</strong> @item.Name</p>
            <p><strong>E-post:</strong> @item.Email</p>
            <p><strong>Telefon:</strong> @item.Phone</p>
            <p><strong>Datum:</strong> @item.DateTime.ToString("yyyy-MM-dd HH:mm")</p>
            <p><strong>Behandling:</strong> @item.Service?.Name</p>

            <div class="btn-row mt-3">
                <a class="btn btn-edit btn-icon" asp-action="Edit" asp-route-id="@item.Id">
                    <i class="fa-solid fa-pen"></i>
                    <span>Redigera</span>
                </a>
                <a class="btn btn-details btn-icon" asp-action="Details" asp-route-id="@item.Id">
                    <i class="fa-solid fa-circle-info"></i>
                    <span>Detaljer</span>
                </a>
                <a class="btn btn-delete btn-icon" asp-action="Delete" asp-route-id="@item.Id">
                    <i class="fa-solid fa-trash"></i>
                    <span>Ta bort</span>
                </a>
            </div>

        </div>
    }
</div>



<!-- BACK BUTTON -->
<a href="/Admin"
   style="
        display:flex;
        align-items:center;
        gap:6px;
        text-decoration:none;
        font-weight:600;
        margin-top:20px;
        cursor:pointer;">
    <i class="fa-solid fa-arrow-left"></i> Tillbaka till adminpanelen
</a>
